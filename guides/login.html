<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Guide Access</title>
</head>
<body>
  <h2>Enter Password to Access Guides</h2>

  <form onsubmit="checkPass(event)">
    <input type="password" id="pass" placeholder="Enter password" required>
    <button type="submit">Enter</button>
    <p id="error" style="color:red;"></p>
  </form>

  <script>
    const expectedHash = "8c176d6c3f81c5a9e8573b5f4c480d8a77d6c99b2d25c3e2ac9ae0fe26f3587e"; // starlight-nova

    async function sha256(str) {
      const buf = new TextEncoder().encode(str);
      const hashBuf = await crypto.subtle.digest("SHA-256", buf);
      return Array.from(new Uint8Array(hashBuf))
        .map(b => b.toString(16).padStart(2, '0'))
        .join('');
    }

    async function checkPass(event) {
      event.preventDefault(); // prevent form reload
      const pass = document.getElementById("pass").value;
      const hash = await sha256(pass);

      // ðŸªµ Debug logging
      console.log("Entered:", `"${pass}"`);
      console.log("Generated hash:", hash);
      console.log("Expected hash:", expectedHash);

      if (hash === expectedHash) {
        sessionStorage.setItem("accessGranted", "true");
        location.href = "index.html";
      } else {
        document.getElementById("error").textContent = "Wrong password.";
      }
    }
  </script>
</body>
</html>
